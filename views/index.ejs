<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Css -->
    <link rel="stylesheet" href="/style/style.css">

    <!-- alert library -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <title>App Web</title>
  </head>
  <body>
    <main>
        <header>
            <h1 class="text-center">LOGO</h1>
        </header>
        <div class="container">
          <div class="row row-cols-2 check ">
            <div class="col active">
              <button onclick="login()" disabled><h2 class="text-start">Log In</h2></button>
              <div class="login">
                <form action="/login" id="pageLogin" method="POST" class="">
                  <% if (info.length !== 0) { %>
                    <script>
                      Swal.fire({
                        title: 'Error!',
                        text: '<%= info %>',
                        icon: 'error',
                        confirmButtonText: 'OK'
                      });
                    </script>
                  <% } %>  
                  <input placeholder="Username" type="text" id="username" name="username" class="input" required="">
                  <input placeholder="Password" type="password" id="password" name="password" class="input" required="">
                  <button class="btnlogin" id="submitLogin" type="submit">
                    <span class="text">Submit</span>
                  </button>
                </form>
              </div>
            </div>
            <div class="col col_signup">
              <button onclick="signup()"><h2 class="text-end">Sign Up</h2></button>
              <div class="signup d-none">
                <form action="/add" method="POST">
                  <% if (info.length !== 0) { %>
                    <script>
                      Swal.fire({
                          title: 'Warning!',
                          text: '<%= info %>',
                          icon: 'warning',
                          confirmButtonText: 'OK'
                        });
                    </script> 
                  <% } else if(success.length === 0) { %>
                    <script>
                      Swal.close();
                    </script>
                  <% } else { %>
                    <script>
                      Swal.fire({
                        title: 'Success!',
                        text: '<%= success %>',
                        icon: 'success',
                        confirmButtonText: 'OK'
                      });
                    </script>
                  <% } %>  
                  <input placeholder="Username" type="text" id="user" name="username" class="input" required >
                  <input placeholder="Email" type="email" id="email" name="email" class="input" required >
                  <input placeholder="Password" type="password" id="pass" name="password" class="input" minlength="6" maxlength="20" required >
                  <input placeholder="Confir Password" type="password" id="confirPass" class="input" required >
                  <input placeholder="Level" type="text" id="level" name="level" class="input" required style="display: none;" value="mitra" >
                  <div id="alert" class="alert alert-warning" role="alert" style="display: none;">
                    Password tidak cocok
                  </div>
                  <button type="submit">
                    <span class="text">Submit</span>
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div> 
        <footer>

        </footer>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
  <script>
    function login() { 
      document.querySelector('.login').classList.toggle('d-none');
      document.querySelector('.signup').classList.toggle('d-none');
      document.querySelector('.col').classList.toggle('active');
      document.querySelector('.col_signup').classList.toggle('active');
      document.querySelector('.col_signup button').removeAttribute('disabled');
      document.querySelector('.col button').setAttribute('disabled','');
    }

    function signup() {
      document.querySelector('.signup').classList.toggle('d-none');
      document.querySelector('.col').classList.toggle('active');
      document.querySelector('.login').classList.toggle('d-none');
      document.querySelector('.col_signup').classList.toggle('active');
      document.querySelector('.col button').removeAttribute('disabled');
      document.querySelector('.col_signup button').setAttribute('disabled','');
    }
    
    const password1 = document.getElementById('pass');
    const password2 = document.getElementById('confirPass');
    const alert = document.getElementById('alert');
    password2.addEventListener('change', ()=>{
      if (password1.value !== "" && password1.value !== password2.value) {
        alert.style.display = 'block';
      } else {
        alert.style.display = 'none';
      }
    });
    
  </script>
</html>